# 🐦 BOIDS — 群れ誘導ゲーム

Boidsアルゴリズム（群れのシミュレーション）を活用したブラウザゲームです。プレイヤーはリーダーとして群れを導き、光のオーブを集めながら捕食者から逃げます。

![Game Screenshot](https://img.shields.io/badge/game-browser-00ffaa?style=for-the-badge)

## 🎮 遊び方

| 要素 | 説明 |
|------|------|
| 🟡 **リーダー** | あなたが操作するキャラクター |
| 🔵 **ボイド** | 群れの法則に従いリーダーについてくる仲間 |
| 🟢 **オーブ** | 集めるとスコア獲得。自動リスポーンで途切れない |
| 🔴 **捕食者** | ボイドを食べる敵。Waveが進むと増加 |
| 💎 **パワーアップ** | 群れ増援・収集範囲拡大・スコアブースト |
| 🌈 **パワーオーブ** | 取ると5秒間無敵。捕食者を逆に食べられる |

### 操作方法

- **スマホ**: タッチ & ドラッグ
- **PC**: WASD / 矢印キー / マウスドラッグ
- **ポーズ**: Escキー / 右上の ⏸ ボタン

### ルール

1. リーダーを操作して群れを導く
2. オーブをリーダーまたはボイドで収集する（リーダー: +5pt、ボイド: +10pt）
3. 3つ集めるごとにコンボ倍率UP（最大5倍）
4. ボイドが捕食されるとコンボリセット＆-20ptペナルティ
5. 全てのボイドが捕食されるとゲームオーバー

### エンドレスモード

- **Wave制**: 15秒ごとにWaveが進行
- **捕食者増加**: Waveに応じて捕食者が段階的にスポーン（最大12体）
- **パワーアップ**: 定期的に出現（Flock+/Range Up/Score Boost）
- **無敵オーブ**: 捕食者が7体以上で低確率出現、取ると5秒間無敵

### セーブ & ハイスコア

- ポーズ時にゲーム状態を自動セーブ（SHA-256改ざん防止付き）
- メニューからセーブデータの続きを再開可能
- ゲームオーバー時にハイスコアをlocalStorageに記録（Top10）
- メニュー画面にTop3ランキング表示

## 🧠 Boidsアルゴリズム

Craig Reynolds が1986年に提唱した人工生命シミュレーション。3つのシンプルなルールから複雑な群れの挙動が創発されます：

| ルール | 説明 |
|--------|------|
| **分離 (Separation)** | 近くの仲間と衝突しないように距離を取る |
| **整列 (Alignment)** | 近くの仲間と同じ方向に向かう |
| **結合 (Cohesion)** | 近くの仲間の中心に向かって集まる |

本ゲームではこれに加えて **リーダー追従** と **捕食者回避** のルールを追加しています。力の合成には **優先度ベースの予算システム** を採用し、高優先度の力（分離・回避）が低優先度（整列・結合）より優先されます。

## 🛠 セットアップ

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev

# ビルド
npm run build

# GitHub Pages にデプロイ
npm run deploy
```

## 📁 プロジェクト構成

```
src/
├── main.jsx      # エントリーポイント
├── App.jsx       # メインゲームループ・入力処理・ゲームロジック
├── vector.js     # 2Dベクトルユーティリティ
├── boids.js      # Boidsアルゴリズム（分離・整列・結合・追従・回避・優先度合成）
├── entities.js   # エンティティ生成（ボイド・捕食者・オーブ・パワーアップ）
├── renderer.js   # Canvas描画（ゲーム画面・HUD・メニュー・ポーズ・ゲームオーバー）
└── storage.js    # ハイスコア・セーブデータ管理（SHA-256検証付き）
```

## 📄 技術スタック

- **React 18** — UI/ライフサイクル管理
- **Canvas API** — 2D描画（パーティクル・グラデーション・HUD）
- **Vite** — ビルドツール
- **gh-pages** — GitHub Pages デプロイ
- **Web Crypto API** — SHA-256ハッシュによるセーブデータ検証

## 📝 License

MIT
